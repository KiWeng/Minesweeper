(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],[,,,,,,,,function(t,e,s){},,function(t,e,s){t.exports=s.p+"static/media/bomb.6153acdb.svg"},function(t,e,s){t.exports=s(18)},,,,,function(t,e,s){},function(t,e,s){},function(t,e,s){"use strict";s.r(e);var a=s(0),n=s.n(a),i=s(9),o=s.n(i),l=(s(16),s(2)),r=s(3),u=s(1),c=s(5),h=s(4),p=(s(17),s(8),s(6)),d=function(t){Object(c.a)(s,t);var e=Object(h.a)(s);function s(t){var a;return Object(l.a)(this,s),(a=e.call(this,t)).handleContextmenu=a.handleContextmenu.bind(Object(u.a)(a)),a.handleClick=a.handleClick.bind(Object(u.a)(a)),a.state={value:a.props.cellState,cellClass:"cell",mineCount:0},a}return Object(r.a)(s,[{key:"handleClick",value:function(){this.props.cellClicked(this.props.rowPos,this.props.colPos)}},{key:"handleContextmenu",value:function(t){t.preventDefault(),this.props.cellContextMenu(this.props.rowPos,this.props.colPos)}},{key:"componentDidUpdate",value:function(t){if(this.props.cellState!==t.cellState){var e,s=this.state.value;s!==this.props.cellState&&(s=this.props.cellState),e="opened"===s?"cell opened":"flagged"===s?"cell flagged":"bombed"===s?"cell bombed":"cell",this.setState({value:s,cellClass:e,mineCount:this.props.mine})}}},{key:"render",value:function(){return n.a.createElement("button",{className:this.state.cellClass,onClick:this.handleClick,onContextMenu:this.handleContextmenu},n.a.createElement("span",{className:"mine-text-"+this.state.value},0!==this.state.mineCount?this.state.mineCount.toString():""))}}]),s}(n.a.Component);var m=function(t){for(var e=[],s=0;s<t.length;s++)e.push(n.a.createElement(d,{rowPos:t.rowPos,colPos:s,cellState:t.rowStates[s],handleChange:t.handleChange,cellClicked:t.cellClicked,cellContextMenu:t.cellContextMenu,mine:t.mineInRow[s]}));return n.a.createElement("div",{className:"row"},e)},f=function(t){Object(c.a)(s,t);var e=Object(h.a)(s);function s(t){var a;Object(l.a)(this,s),(a=e.call(this,t)).rowCount=9,a.colCount=8,a.updateMineStates=a.updateMineStates.bind(Object(u.a)(a)),a.cellClicked=a.cellClicked.bind(Object(u.a)(a)),a.cellContextMenu=a.cellContextMenu.bind(Object(u.a)(a)),a.setUpMines();for(var n=[],i=0;i<a.rowCount;i++){n.push([]);for(var o=0;o<a.colCount;o++)n[i].push("closed")}return a.state={state:n,isOver:!1,isStart:!1},a.flagCount=10,a.mineCount=10,a}return Object(r.a)(s,[{key:"componentDidUpdate",value:function(t,e,s){if(this.props.doReset){this.setUpMines();for(var a=[],n=0;n<this.rowCount;n++){a.push([]);for(var i=0;i<this.colCount;i++)a[n].push("closed")}this.setState({state:a,isOver:!1,isStart:!1}),this.flagCount=10,this.mineCount=10}}},{key:"cellClicked",value:function(t,e){if(!1===this.state.isStart){for(;-1===this.minePos[t][e];)this.setUpMines();this.setState({isStart:!0})}"opened"!==this.state.state[t][e]&&(-1!==this.minePos[t][e]?this.updateMineStates(t,e,"opened"):-1===this.minePos[t][e]&&this.updateMineStates(t,e,"bombed"))}},{key:"cellContextMenu",value:function(t,e){"closed"===this.state.state[t][e]&&this.props.flagCount?this.updateMineStates(t,e,"flagged"):"flagged"===this.state.state[t][e]&&this.updateMineStates(t,e,"closed")}},{key:"updateMineStates",value:function(t,e,s){if(!0!==this.state.isOver){"flagged"===this.state.state[t][e]&&"opened"===s&&this.props.updateGameStatus(!1,this.props.flagCount+1);var a=this.state.state;if(a[t][e]=s,this.setState({state:a}),"opened"===s&&(0===this.minePos[t][e]&&this.revealSafeZone(t,e),this.props.updateGameStatus(!1,this.props.flagCount)),"flagged"===s&&(this.props.updateGameStatus(!1,this.props.flagCount-1),-1===this.minePos[t][e]&&10===++this.mineCount&&(this.props.updateGameStatus(!0,this.props.flagCount),this.setState({isOver:!0}))),"closed"===s&&this.props.updateGameStatus(!1,this.props.flagCount+1),"bombed"===s){this.props.updateGameStatus(!0,this.props.flagCount),this.setState({isOver:!0});var n=this.state.state;for(t in this.minePos)for(e in this.minePos[t])-1===this.minePos[t][e]&&(n[t][e]="bombed");this.setState({state:n})}}}},{key:"revealSafeZone",value:function(t,e){var s=[[-1,-1],[0,-1],[1,-1],[-1,0],[1,0],[-1,1],[0,1],[1,1]],a=[];a.push([t,e]);for(var n=this.state.state;a.length>0;){var i=a[0];a.shift();var o,l=Object(p.a)(s);try{for(l.s();!(o=l.n()).done;){var r=o.value,u=r[0]+i[0],c=r[1]+i[1];u<0||u>=this.rowCount||(c<0||c>=this.colCount||this.minePos[u][c]<0||"closed"===n[u][c]&&(n[u][c]="opened",0===this.minePos[u][c]&&a.push([u,c])))}}catch(h){l.e(h)}finally{l.f()}}this.setState({state:n})}},{key:"adjacentMineCount",value:function(t,e){if(-1===this.minePos[t][e])return-1;for(var s=0,a=0,n=[[-1,-1],[0,-1],[1,-1],[-1,0],[1,0],[-1,1],[0,1],[1,1]];a<n.length;a++){var i=n[a],o=i[0]+t,l=i[1]+e;o<0||o>=this.rowCount||(l<0||l>=this.colCount||(s+=-1===this.minePos[o][l]))}return s}},{key:"setUpMines",value:function(){this.minePos=[];for(var t=0;t<this.rowCount;t++){this.minePos.push([]);for(var e=0;e<this.colCount;e++)this.minePos[t].push(0)}for(var s=new Set;s.size<10;)s.add(Math.floor(Math.random()*this.colCount*this.rowCount));var a,n=Object(p.a)(s);try{for(n.s();!(a=n.n()).done;){var i=a.value;this.minePos[Math.floor(i/this.colCount)][i%this.colCount]=-1}}catch(r){n.e(r)}finally{n.f()}for(var o=0;o<this.rowCount;o++)for(var l=0;l<this.colCount;l++)this.minePos[o][l]=this.adjacentMineCount(o,l)}},{key:"render",value:function(){for(var t=[],e=0;e<this.rowCount;e++)t.push(m({length:this.colCount,rowPos:e,cellClicked:this.cellClicked,rowStates:this.state.state[e],cellContextMenu:this.cellContextMenu,mineInRow:this.minePos[e]}));return n.a.createElement("div",{className:"field"},t)}}]),s}(n.a.Component),C=s(10),v=s.n(C),b=function(t){Object(c.a)(s,t);var e=Object(h.a)(s);function s(t){var a;return Object(l.a)(this,s),(a=e.call(this,t)).state={startTime:0,currentTime:0},a}return Object(r.a)(s,[{key:"componentDidMount",value:function(){var t=this;this.timerID=setInterval((function(){return t.tick()}),50)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerID)}},{key:"tick",value:function(){this.props.isEnded||(0===this.state.startTime&&this.setState({startTime:(new Date).getTime()}),this.setState({currentTime:(new Date).getTime()}))}},{key:"componentDidUpdate",value:function(t,e,s){this.props.doReset&&this.setState({startTime:0,currentTime:0})}},{key:"render",value:function(){var t=this.state.currentTime-this.state.startTime,e=new Date(t).getMinutes(),s=new Date(t).getSeconds(),a="";return s<10&&(a="0"),n.a.createElement("span",{className:"Timer"},e,":",a+s)}}]),s}(n.a.Component);function S(t){return n.a.createElement("p",null,t.flagCount)}function g(t){return n.a.createElement("button",{style:{cursor:"pointer"},onClick:t.handleReset},"reset")}var k=function(t){Object(c.a)(s,t);var e=Object(h.a)(s);function s(){return Object(l.a)(this,s),e.apply(this,arguments)}return Object(r.a)(s,[{key:"componentDidUpdate",value:function(t){this.props.doReset,t.doReset}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement("span",{className:"title"},"Minesweeper"),n.a.createElement("img",{src:v.a,className:"App-logo",alt:"logo"})),n.a.createElement("div",null,n.a.createElement(S,{flagCount:this.props.flagCount}),n.a.createElement(g,{handleReset:this.props.handleReset}),n.a.createElement(b,{isEnded:this.props.isEnded,doReset:this.props.doReset})))}}]),s}(n.a.Component),O=function(t){Object(c.a)(s,t);var e=Object(h.a)(s);function s(t){var a;return Object(l.a)(this,s),(a=e.call(this,t)).state={flagCount:10,isEnded:!0,doReset:!1},a.updateGameStatus=a.updateGameStatus.bind(Object(u.a)(a)),a.handleReset=a.handleReset.bind(Object(u.a)(a)),a}return Object(r.a)(s,[{key:"updateGameStatus",value:function(t,e){this.setState({flagCount:e,isEnded:t,doReset:!1})}},{key:"handleReset",value:function(){this.setState({flagCount:10,isEnded:!0,doReset:!0})}},{key:"componentDidUpdate",value:function(){this.state.doReset&&this.setState({doReset:!1})}},{key:"render",value:function(){return console.log(this.state.doReset),n.a.createElement("div",{className:"App"},n.a.createElement("header",{className:"App-header"},n.a.createElement(k,{isEnded:this.state.isEnded,flagCount:this.state.flagCount,handleReset:this.handleReset,doReset:this.state.doReset}),n.a.createElement(f,{updateGameStatus:this.updateGameStatus,flagCount:this.state.flagCount,doReset:this.state.doReset})))}}]),s}(n.a.Component);o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(O,null)),document.getElementById("root"))}],[[11,1,2]]]);
//# sourceMappingURL=main.c0d58f9d.chunk.js.map