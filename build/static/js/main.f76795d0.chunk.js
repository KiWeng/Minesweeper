(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{39:function(t,e,a){},45:function(t,e,a){t.exports=a.p+"static/media/bomb.15d6d6ee.svg"},60:function(t,e,a){t.exports=a(91)},65:function(t,e,a){},66:function(t,e,a){},91:function(t,e,a){"use strict";a.r(e);var s=a(0),n=a.n(s),i=a(27),o=a.n(i),l=(a(65),a(10)),r=a(11),u=a(9),c=a(14),h=a(13),p=(a(66),a(39),a(37)),d=(a(26),function(t){Object(c.a)(a,t);var e=Object(h.a)(a);function a(t){var s;return Object(l.a)(this,a),(s=e.call(this,t)).handleContextmenu=s.handleContextmenu.bind(Object(u.a)(s)),s.handleClick=s.handleClick.bind(Object(u.a)(s)),s.state={value:s.props.cellState,cellClass:"cell",mineCount:0},s}return Object(r.a)(a,[{key:"handleClick",value:function(){this.props.cellClicked(this.props.rowPos,this.props.colPos)}},{key:"handleContextmenu",value:function(t){t.preventDefault(),this.props.cellContextMenu(this.props.rowPos,this.props.colPos)}},{key:"componentDidUpdate",value:function(t){if(this.props.cellState!==t.cellState){var e,a=this.state.value;a!==this.props.cellState&&(a=this.props.cellState),e="opened"===a?"cell opened":"flagged"===a?"cell flagged":"bombed"===a?"cell bombed":"cell",this.setState({value:a,cellClass:e,mineCount:this.props.mine})}}},{key:"render",value:function(){return n.a.createElement("button",{className:this.state.cellClass,onClick:this.handleClick,onContextMenu:this.handleContextmenu},n.a.createElement("span",{className:"mine-text-"+this.state.value},0!==this.state.mineCount?this.state.mineCount.toString():""))}}]),a}(n.a.Component));var m=function(t){for(var e=[],a=0;a<t.length;a++)e.push(n.a.createElement(d,{rowPos:t.rowPos,colPos:a,cellState:t.rowStates[a],handleChange:t.handleChange,cellClicked:t.cellClicked,cellContextMenu:t.cellContextMenu,mine:t.mineInRow[a]}));return n.a.createElement("div",{className:"row"},e)},f=function(t){Object(c.a)(a,t);var e=Object(h.a)(a);function a(t){var s;Object(l.a)(this,a),(s=e.call(this,t)).rowCount=9,s.colCount=8,s.updateMineStates=s.updateMineStates.bind(Object(u.a)(s)),s.cellClicked=s.cellClicked.bind(Object(u.a)(s)),s.cellContextMenu=s.cellContextMenu.bind(Object(u.a)(s)),s.setUpMines();for(var n=[],i=0;i<s.rowCount;i++){n.push([]);for(var o=0;o<s.colCount;o++)n[i].push("closed")}return s.state={state:n,isOver:!1,isStart:!1},s.flagCount=10,s.mineCount=10,s}return Object(r.a)(a,[{key:"componentDidUpdate",value:function(t,e,a){if(this.props.doReset){this.setUpMines();for(var s=[],n=0;n<this.rowCount;n++){s.push([]);for(var i=0;i<this.colCount;i++)s[n].push("closed")}this.setState({state:s,isOver:!1,isStart:!1}),this.flagCount=10,this.mineCount=10}}},{key:"cellClicked",value:function(t,e){if(!1===this.state.isStart){for(;-1===this.minePos[t][e];)this.setUpMines();this.setState({isStart:!0})}"opened"!==this.state.state[t][e]&&(-1!==this.minePos[t][e]?this.updateMineStates(t,e,"opened"):-1===this.minePos[t][e]&&this.updateMineStates(t,e,"bombed"))}},{key:"cellContextMenu",value:function(t,e){"closed"===this.state.state[t][e]&&this.props.flagCount?this.updateMineStates(t,e,"flagged"):"flagged"===this.state.state[t][e]&&this.updateMineStates(t,e,"closed")}},{key:"updateMineStates",value:function(t,e,a){if(!0!==this.state.isOver){"flagged"===this.state.state[t][e]&&"opened"===a&&this.props.updateGameStatus(!1,this.props.flagCount+1);var s=this.state.state;if(s[t][e]=a,this.setState({state:s}),"opened"===a&&(0===this.minePos[t][e]&&this.revealSafeZone(t,e),this.props.updateGameStatus(!1,this.props.flagCount)),"flagged"===a&&(this.props.updateGameStatus(!1,this.props.flagCount-1),-1===this.minePos[t][e]&&10===++this.mineCount&&(this.props.updateGameStatus(!0,this.props.flagCount),this.setState({isOver:!0}))),"closed"===a&&this.props.updateGameStatus(!1,this.props.flagCount+1),"bombed"===a){this.props.updateGameStatus(!0,this.props.flagCount),this.setState({isOver:!0});var n=this.state.state;for(t in this.minePos)for(e in this.minePos[t])-1===this.minePos[t][e]&&(n[t][e]="bombed");this.setState({state:n})}}}},{key:"revealSafeZone",value:function(t,e){var a=[[-1,-1],[0,-1],[1,-1],[-1,0],[1,0],[-1,1],[0,1],[1,1]],s=[];s.push([t,e]);for(var n=this.state.state;s.length>0;){var i=s[0];s.shift();var o,l=Object(p.a)(a);try{for(l.s();!(o=l.n()).done;){var r=o.value,u=r[0]+i[0],c=r[1]+i[1];u<0||u>=this.rowCount||(c<0||c>=this.colCount||this.minePos[u][c]<0||"closed"===n[u][c]&&(n[u][c]="opened",0===this.minePos[u][c]&&s.push([u,c])))}}catch(h){l.e(h)}finally{l.f()}}this.setState({state:n})}},{key:"adjacentMineCount",value:function(t,e){if(-1===this.minePos[t][e])return-1;for(var a=0,s=0,n=[[-1,-1],[0,-1],[1,-1],[-1,0],[1,0],[-1,1],[0,1],[1,1]];s<n.length;s++){var i=n[s],o=i[0]+t,l=i[1]+e;o<0||o>=this.rowCount||(l<0||l>=this.colCount||(a+=-1===this.minePos[o][l]))}return a}},{key:"setUpMines",value:function(){this.minePos=[];for(var t=0;t<this.rowCount;t++){this.minePos.push([]);for(var e=0;e<this.colCount;e++)this.minePos[t].push(0)}for(var a=new Set;a.size<10;)a.add(Math.floor(Math.random()*this.colCount*this.rowCount));var s,n=Object(p.a)(a);try{for(n.s();!(s=n.n()).done;){var i=s.value;this.minePos[Math.floor(i/this.colCount)][i%this.colCount]=-1}}catch(r){n.e(r)}finally{n.f()}for(var o=0;o<this.rowCount;o++)for(var l=0;l<this.colCount;l++)this.minePos[o][l]=this.adjacentMineCount(o,l)}},{key:"render",value:function(){for(var t=[],e=0;e<this.rowCount;e++)t.push(m({length:this.colCount,rowPos:e,cellClicked:this.cellClicked,rowStates:this.state.state[e],cellContextMenu:this.cellContextMenu,mineInRow:this.minePos[e]}));return n.a.createElement("div",{className:"field"},t)}}]),a}(n.a.Component),v=a(45),C=a.n(v),S=a(94),b=function(t){Object(c.a)(a,t);var e=Object(h.a)(a);function a(t){var s;return Object(l.a)(this,a),(s=e.call(this,t)).state={startTime:0,currentTime:0},s}return Object(r.a)(a,[{key:"componentDidMount",value:function(){var t=this;this.timerID=setInterval((function(){return t.tick()}),50)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerID)}},{key:"tick",value:function(){this.props.isEnded||(0===this.state.startTime&&this.setState({startTime:(new Date).getTime()}),this.setState({currentTime:(new Date).getTime()}))}},{key:"componentDidUpdate",value:function(t,e,a){this.props.doReset&&this.setState({startTime:0,currentTime:0})}},{key:"render",value:function(){var t=this.state.currentTime-this.state.startTime,e=new Date(t).getMinutes(),a=new Date(t).getSeconds(),s="";return a<10&&(s="0"),n.a.createElement(S.a,{title:n.a.createElement("div",{style:{color:"white"}},"Timer"),valueStyle:{color:"white"},value:e+":"+s+a})}}]),a}(n.a.Component),g=a(96),k=a(97),y=a(95),E=a(98),O=function(t){Object(c.a)(a,t);var e=Object(h.a)(a);function a(){return Object(l.a)(this,a),e.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{style:{padding:"16"}},n.a.createElement(g.a,{gutter:[0,16]},n.a.createElement(k.a,{span:24},n.a.createElement("div",{className:"title"},"Minesweeper",n.a.createElement("img",{src:C.a,className:"App-logo",alt:"logo"}))),n.a.createElement(k.a,{span:12},n.a.createElement(S.a,{title:n.a.createElement("div",{style:{color:"white"}},"Mine counter"),value:this.props.flagCount,prefix:n.a.createElement(E.a,null),valueStyle:{color:"white"}})),n.a.createElement(k.a,{span:12},n.a.createElement(b,{isEnded:this.props.isEnded,doReset:this.props.doReset})),n.a.createElement(k.a,{span:24},n.a.createElement(y.a,{type:"primary",shape:"round",size:"large",onClick:this.props.handleReset,style:{width:"100px"}},"Reset"))))}}]),a}(n.a.Component),w=function(t){Object(c.a)(a,t);var e=Object(h.a)(a);function a(t){var s;return Object(l.a)(this,a),(s=e.call(this,t)).state={flagCount:10,isEnded:!0,doReset:!1},s.updateGameStatus=s.updateGameStatus.bind(Object(u.a)(s)),s.handleReset=s.handleReset.bind(Object(u.a)(s)),s}return Object(r.a)(a,[{key:"updateGameStatus",value:function(t,e){this.setState({flagCount:e,isEnded:t,doReset:!1})}},{key:"handleReset",value:function(){this.setState({flagCount:10,isEnded:!0,doReset:!0})}},{key:"componentDidUpdate",value:function(){this.state.doReset&&this.setState({doReset:!1})}},{key:"render",value:function(){return console.log(this.state.doReset),n.a.createElement("div",{className:"App"},n.a.createElement("header",{className:"App-header"},n.a.createElement("div",{style:{margin:"16px"}},n.a.createElement(O,{isEnded:this.state.isEnded,flagCount:this.state.flagCount,handleReset:this.handleReset,doReset:this.state.doReset})),n.a.createElement(f,{updateGameStatus:this.updateGameStatus,flagCount:this.state.flagCount,doReset:this.state.doReset})))}}]),a}(n.a.Component);o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(w,null)),document.getElementById("root"))}},[[60,1,2]]]);
//# sourceMappingURL=main.f76795d0.chunk.js.map